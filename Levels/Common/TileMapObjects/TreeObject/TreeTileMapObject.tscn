[gd_scene load_steps=18 format=2]

[ext_resource path="res://Levels/Common/TileMapObjects/BaseObject/BaseTileMapObject.tscn" type="PackedScene" id=1]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/TreeTileMapObject.cs" type="Script" id=2]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/Ui/InteractionPopup.tscn" type="PackedScene" id=3]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/TreeState.cs" type="Script" id=4]
[ext_resource path="res://icon.png" type="Texture" id=5]
[ext_resource path="res://Levels/Common/TileMapObjects/BaseObject/TransparencyManager.cs" type="Script" id=6]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/TreeActionRadius.cs" type="Script" id=7]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/treeCircle_green.svg" type="Texture" id=8]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/treeCircle_red.svg" type="Texture" id=9]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/TreeStateMachine.cs" type="Script" id=10]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/TreeStates/GrowingState.cs" type="Script" id=11]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/Effects/TreeAddEnergyParticleEffect.tscn" type="PackedScene" id=12]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/TreeStates/FullyGrownState.cs" type="Script" id=13]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/TreeStates/InfestedState.cs" type="Script" id=14]
[ext_resource path="res://Levels/Common/TileMapObjects/TreeObject/TreeStates/DeadState.cs" type="Script" id=15]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 30.4618, 62.0236 )

[sub_resource type="CircleShape2D" id=2]
radius = 155.281

[node name="TreeTileMapObject" instance=ExtResource( 1 )]
z_index = 200
script = ExtResource( 2 )
hoverIndicatorNodePath = NodePath("Hover/HoverIndicator")
actionRadiusNodePath = NodePath("TreeActionRadius")
stateMachineNodePath = NodePath("TreeStateMachine")
treeStateNodePath = NodePath("TreeState")
interactionPopupPackedScene = ExtResource( 3 )

[node name="TreeState" type="Node2D" parent="." index="0"]
script = ExtResource( 4 )

[node name="Sprite" type="Sprite" parent="." index="1"]
self_modulate = Color( 0, 0.623529, 0.133333, 1 )
scale = Vector2( 1, 2 )
texture = ExtResource( 5 )
offset = Vector2( 0, -16 )

[node name="Hover" parent="." index="2"]
editor/display_folded = true

[node name="TransparencyManager" type="Area2D" parent="." index="3"]
editor/display_folded = true
position = Vector2( 0, -32 )
collision_layer = 8
collision_mask = 6
script = ExtResource( 6 )
spriteNodePath = NodePath("../Sprite")

[node name="CollisionShape2D" type="CollisionShape2D" parent="TransparencyManager" index="0"]
shape = SubResource( 1 )

[node name="TreeActionRadius" type="Area2D" parent="." index="4" groups=[
"actionRadius",
]]
editor/display_folded = true
collision_layer = 8
collision_mask = 14
script = ExtResource( 7 )
textureNodePath = NodePath("Sprite")
healthyTexture = ExtResource( 8 )
infestedTexture = ExtResource( 9 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="TreeActionRadius" index="0"]
shape = SubResource( 2 )

[node name="Sprite" type="Sprite" parent="TreeActionRadius" index="1"]
modulate = Color( 1, 1, 1, 0.188235 )
position = Vector2( 1.90735e-06, -0.999992 )
scale = Vector2( 1.55, 1.55 )
z_as_relative = false
texture = ExtResource( 8 )

[node name="TreeStateMachine" type="Node2D" parent="." index="5" groups=[
"state_machine",
]]
script = ExtResource( 10 )
initialStateNodePath = NodePath("GrowingState")
growing = NodePath("GrowingState")
fullGrown = NodePath("FullyGrownState")
infested = NodePath("InfestedState")
dead = NodePath("DeadState")

[node name="GrowingState" type="Node2D" parent="TreeStateMachine" index="0"]
script = ExtResource( 11 )
treeStateNodePath = NodePath("../../TreeState")
treeSpriteNodePath = NodePath("../../Sprite")
treeGrowthTimerNodePath = NodePath("TreeGrowthTimer")
pointTimerNodePath = NodePath("PointTimer")
addEnergyTimerNodePath = NodePath("AddEnergyTimer")
treeActionRadiusNodePath = NodePath("../../TreeActionRadius")
addEnergyParticleEffectPackedScene = ExtResource( 12 )

[node name="TreeGrowthTimer" type="Timer" parent="TreeStateMachine/GrowingState" index="0"]

[node name="PointTimer" type="Timer" parent="TreeStateMachine/GrowingState" index="1"]

[node name="AddEnergyTimer" type="Timer" parent="TreeStateMachine/GrowingState" index="2"]

[node name="FullyGrownState" type="Node2D" parent="TreeStateMachine" index="1"]
script = ExtResource( 13 )
pointTimerNodePath = NodePath("PointTimer")
addEnergyTimerNodePath = NodePath("AddEnergyTimer")
treeActionRadiusNodePath = NodePath("../../TreeActionRadius")
treeStateNodePath = NodePath("../../TreeState")
addEnergyParticleEffectPackedScene = ExtResource( 12 )

[node name="PointTimer" type="Timer" parent="TreeStateMachine/FullyGrownState" index="0"]

[node name="AddEnergyTimer" type="Timer" parent="TreeStateMachine/FullyGrownState" index="1"]

[node name="InfestedState" type="Node2D" parent="TreeStateMachine" index="2"]
script = ExtResource( 14 )
pointTimerNodePath = NodePath("PointTimer")
damageTimerNodePath = NodePath("DamageTimer")
addEnergyTimerNodePath = NodePath("AddEnergyTimer")
treeActionRadiusNodePath = NodePath("../../TreeActionRadius")
treeStateNodePath = NodePath("../../TreeState")
addEnergyParticleEffectPackedScene = ExtResource( 12 )

[node name="PointTimer" type="Timer" parent="TreeStateMachine/InfestedState" index="0"]

[node name="DamageTimer" type="Timer" parent="TreeStateMachine/InfestedState" index="1"]

[node name="AddEnergyTimer" type="Timer" parent="TreeStateMachine/InfestedState" index="2"]

[node name="DeadState" type="Node2D" parent="TreeStateMachine" index="3"]
script = ExtResource( 15 )

[node name="Control" type="Control" parent="." index="6"]
margin_right = 40.0
margin_bottom = 40.0

[node name="InteractionPopup" parent="Control" index="0" instance=ExtResource( 3 )]
visible = true
margin_right = 82.0
margin_bottom = 100.0
